"use strict";angular.module("gylApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.select"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("gylApp").controller("MainCtrl",["$scope","$http",function(a,b){a.base={},a.base.selected={name:"United-States",country:"USD"},a.rate={},a.amount=1,a.numeric=/^\d+$/;var c=function(b){if(fx.base=b.data.base,fx.rates=b.data.rates,a.currencies=_.map(b.data.rates,function(a,b){return{country:b,rate:a}}),a.rate.selected){var c=a.rate.selected.country,d=b.data.rates;a.rate.selected.rate=d[c].toFixed(2)}},d=function(a){console.log("Error:",a)};a.changeFlag=function(c){b.get("countries.json").then(function(b){var d=c.country.slice(0,-1);c.name=b.data[d].replace(/\s+/g,"-"),a.rate.selected.rate=Number(a.rate.selected.rate).toFixed(2)})},a.calculateRate=function(b){for(var c in fx.rates)c===a.rate.selected.country&&(a.rate.selected.rate=fx(b).from(fx.base).to(c).toFixed(2))},a.getRates=function(e,f){var g=e.country;b.get("https://api.fixer.io/latest?base="+g).then(c,d),a.changeFlag(e),a.calculateRate(f)},b.get("https://api.fixer.io/latest?base=USD").then(c,d)}]),angular.module("gylApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="jumbotron"> <input ng-model="amount" ng-pattern="numeric" type="text" placeholder="{{amount ? amount : \'1\'}}" ng-change="calculateRate(amount)"> <img src="images/flags/{{base.selected.name}}.png" style="width: 7%; height: 7%; position: relative"> <ui-select ng-model="base.selected" class="dropdown" theme="bootstrap"> <ui-select-match> {{$select.selected.country}} </ui-select-match> <ui-select-choices repeat="currency in currencies | filter: $select.search" value="{{$select.selected.country}}" ng-click="getRates($select.selected, amount)"> <div ng-bind-html="currency.country | highlight: $select.search"></div> </ui-select-choices> </ui-select> <button type="button" class="btn btn-default btn-circle"> <i class="fa fa-exchange fa-lg" aria-hidden="true"></i> </button> <div class="flag" ng-if="rate.selected.name"> <img src="images/flags/{{rate.selected.name}}.png" id="to" style="width: 7%; height: 7%; position: relative"> </div> <ui-select ng-model="rate.selected" class="dropdown" theme="bootstrap"> <ui-select-match placeholder="Select Country"> {{$select.selected.country}} </ui-select-match> <ui-select-choices repeat="currency in currencies | filter: $select.search" value="{{$select.selected.country}}" ng-click="changeFlag($select.selected)"> <!-- Need to use local storage --> <div ng-bind-html="currency.country | highlight: $select.search"></div> </ui-select-choices> </ui-select> <div class="result"> <span>{{amount}} {{base.selected.country}} = {{rate.selected.rate}} {{rate.selected.country}}</span> </div> </div>')}]);